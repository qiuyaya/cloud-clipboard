# æµ‹è¯•ç³»ç»Ÿå®ç°æ¦‚è§ˆ

æœ¬æ–‡æ¡£æ€»ç»“äº†ä¸ºCloud Clipboardé¡¹ç›®å®ç°çš„å®Œæ•´æµ‹è¯•ä½“ç³»ã€‚

## ğŸ¯ å®ç°ç›®æ ‡

âœ… **å®Œæˆçš„ä»»åŠ¡**ï¼š
1. åˆ†æç°æœ‰é¡¹ç›®ç»“æ„å’Œæµ‹è¯•é…ç½®
2. æ£€æŸ¥å·²æœ‰çš„æµ‹è¯•æ–‡ä»¶å’Œè¦†ç›–èŒƒå›´  
3. è¡¥å……å®Œå–„å•å…ƒæµ‹è¯•
4. å®ç°é›†æˆæµ‹è¯•
5. è®¾ç½®ç«¯åˆ°ç«¯æµ‹è¯•
6. é…ç½®è‡ªåŠ¨åŒ–æµ‹è¯•æµç¨‹ï¼ˆCI/CDï¼‰
7. æ·»åŠ æµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
8. åˆ›å»ºæµ‹è¯•æ–‡æ¡£å’Œæœ€ä½³å®è·µæŒ‡å—

## ğŸ“ æµ‹è¯•æ¶æ„

### ä¸‰å±‚æµ‹è¯•ç­–ç•¥

```
å•å…ƒæµ‹è¯• (Unit Tests)
â”œâ”€â”€ shared/ - Zod schemaså’Œå·¥å…·å‡½æ•°æµ‹è¯•
â”œâ”€â”€ server/ - æœåŠ¡ç±»å’Œä¸šåŠ¡é€»è¾‘æµ‹è¯•
â””â”€â”€ client/ - Reactç»„ä»¶å’Œhooksæµ‹è¯•

é›†æˆæµ‹è¯• (Integration Tests)  
â””â”€â”€ server/ - APIç«¯ç‚¹å’ŒWebSocketé›†æˆæµ‹è¯•

ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)
â””â”€â”€ client/ - å®Œæ•´ç”¨æˆ·æµç¨‹æµ‹è¯•
```

### æµ‹è¯•å·¥å…·æ ˆ

| å±‚çº§ | æ¡†æ¶ | å·¥å…· |
|------|------|------|
| å•å…ƒæµ‹è¯• | Bun Test (server/shared), Vitest (client) | Jest Mock, Testing Library |
| é›†æˆæµ‹è¯• | Bun Test + Supertest | Socket.IO Client |
| E2Eæµ‹è¯• | Playwright | è·¨æµè§ˆå™¨æµ‹è¯• |
| è¦†ç›–ç‡ | å†…ç½®å·¥å…· | è‡ªå®šä¹‰æŠ¥å‘Šè„šæœ¬ |

## ğŸ§ª æµ‹è¯•æ–‡ä»¶æ¸…å•

### Shared Package
```
shared/src/
â”œâ”€â”€ schemas.test.ts        # Zod schemaéªŒè¯æµ‹è¯•
â”œâ”€â”€ utils.test.ts          # å·¥å…·å‡½æ•°æµ‹è¯•
â””â”€â”€ bun.config.ts          # Bunæµ‹è¯•é…ç½®
```

### Server Package  
```
server/src/
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ RoomService.test.ts     # æˆ¿é—´æœåŠ¡æµ‹è¯•
â”‚   â””â”€â”€ FileManager.test.ts     # æ–‡ä»¶ç®¡ç†æµ‹è¯•
â”œâ”€â”€ integration.test.ts         # é›†æˆæµ‹è¯•
â””â”€â”€ bun.config.ts              # Bunæµ‹è¯•é…ç½®
```

### Client Package
```
client/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ services/socket.test.ts    # SocketæœåŠ¡æµ‹è¯•
â”‚   â”œâ”€â”€ lib/utils.test.ts          # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”œâ”€â”€ components/ui/button.test.tsx # UIç»„ä»¶æµ‹è¯•
â”‚   â””â”€â”€ test/setup.ts              # æµ‹è¯•ç¯å¢ƒé…ç½®
â”œâ”€â”€ e2e/
â”‚   â””â”€â”€ basic-functionality.spec.ts # E2Eæµ‹è¯•
â”œâ”€â”€ vitest.config.ts               # Vitesté…ç½®
â””â”€â”€ playwright.config.ts           # Playwrighté…ç½®
```

## âš™ï¸ é…ç½®æ–‡ä»¶

### æµ‹è¯•å‘½ä»¤
```json
{
  "test": "bun run shared:test && bun run server:test && bun run client:test",
  "test:watch": "concurrently \"bun run shared:test:watch\" \"bun run server:test:watch\" \"bun run client:test:watch\"",
  "test:coverage": "bun run shared:test:coverage && bun run server:test:coverage && bun run client:test:coverage && node scripts/coverage-report.js",
  "test:integration": "bun run server:test:integration", 
  "test:e2e": "bun run client:test:e2e"
}
```

### è¦†ç›–ç‡é˜ˆå€¼
| Package | Functions | Lines | Statements | Branches |
|---------|-----------|-------|------------|----------|
| Shared  | 80%       | 80%   | 80%        | 70%      |
| Server  | 75%       | 75%   | 75%        | 65%      |
| Client  | 70%       | 70%   | 70%        | 60%      |

## ğŸ”„ CI/CD æµæ°´çº¿

### GitHub Actionså·¥ä½œæµ
```yaml
jobs:
  - lint-and-typecheck     # ä»£ç è´¨é‡æ£€æŸ¥
  - unit-tests            # å•å…ƒæµ‹è¯•
  - integration-tests     # é›†æˆæµ‹è¯•  
  - test-coverage         # è¦†ç›–ç‡æ£€æŸ¥
  - e2e-tests            # ç«¯åˆ°ç«¯æµ‹è¯•
  - build-test           # æ„å»ºæµ‹è¯•
  - security-scan        # å®‰å…¨æ‰«æ
  - performance-test     # æ€§èƒ½æµ‹è¯•
  - test-matrix          # å¤šç¯å¢ƒæµ‹è¯•
```

### æµ‹è¯•ç¯å¢ƒæ”¯æŒ
- **æ“ä½œç³»ç»Ÿ**: Ubuntu, Windows, macOS
- **æµè§ˆå™¨**: Chrome, Firefox, Safari, Edge
- **è®¾å¤‡**: æ¡Œé¢å’Œç§»åŠ¨ç«¯è§†å£

## ğŸ“Š è¦†ç›–ç‡æŠ¥å‘Š

### è‡ªåŠ¨åŒ–æŠ¥å‘Š
- **æ ¼å¼**: Text, JSON, HTML, LCOV
- **èšåˆ**: è·¨åŒ…çš„ç»Ÿä¸€è¦†ç›–ç‡æŠ¥å‘Š
- **é˜ˆå€¼æ£€æŸ¥**: è‡ªåŠ¨å¤±è´¥æ£€æµ‹
- **å¾½ç« ç”Ÿæˆ**: READMEå±•ç¤ºç”¨çš„è¦†ç›–ç‡å¾½ç« 

### æŠ¥å‘Šè„šæœ¬
```bash
# ç”Ÿæˆç»¼åˆè¦†ç›–ç‡æŠ¥å‘Š
node scripts/coverage-report.js

# ç”Ÿæˆå¹¶æ£€æŸ¥é˜ˆå€¼ï¼ˆCIæ¨¡å¼ï¼‰
node scripts/coverage-report.js --fail-on-threshold
```

## ğŸ§© æµ‹è¯•æ¨¡å¼å’Œæœ€ä½³å®è·µ

### å•å…ƒæµ‹è¯•æ¨¡å¼
- **AAAæ¨¡å¼**: Arrange-Act-Assert
- **Builderæ¨¡å¼**: çµæ´»çš„æµ‹è¯•æ•°æ®æ„å»º
- **Mockç­–ç•¥**: ä¾èµ–æ³¨å…¥å’Œæœ€å°åŒ–Mock

### é›†æˆæµ‹è¯•æ¨¡å¼  
- **WebSocketæµ‹è¯•**: å®æ—¶äº‹ä»¶æµéªŒè¯
- **APIæµ‹è¯•**: RESTfulç«¯ç‚¹éªŒè¯
- **æ–‡ä»¶æ“ä½œæµ‹è¯•**: æ–‡ä»¶ä¸Šä¼ å’Œç®¡ç†éªŒè¯

### E2Eæµ‹è¯•æ¨¡å¼
- **ç”¨æˆ·æµç¨‹**: å®Œæ•´çš„ä¸šåŠ¡åœºæ™¯æµ‹è¯•
- **è·¨æµè§ˆå™¨**: å…¼å®¹æ€§éªŒè¯
- **å“åº”å¼**: ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯æµ‹è¯•

## ğŸ“š æ–‡æ¡£

### æ ¸å¿ƒæ–‡æ¡£
- `docs/TESTING.md` - å®Œæ•´æµ‹è¯•æŒ‡å—
- `docs/TEST_PATTERNS.md` - æµ‹è¯•æ¨¡å¼å’Œæœ€ä½³å®è·µ
- `TESTING_IMPLEMENTATION.md` - æœ¬å®ç°æ¦‚è§ˆ

### ä½¿ç”¨æŒ‡å—
```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
bun run test

# å¼€å‘æ¨¡å¼ï¼ˆç›‘è§†æ–‡ä»¶å˜åŒ–ï¼‰
bun run test:watch

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
bun run test:coverage

# è¿è¡Œç‰¹å®šç±»å‹çš„æµ‹è¯•
bun run test:integration
bun run test:e2e
```

## ğŸ‰ ä¸»è¦ç‰¹æ€§

### âœ¨ äº®ç‚¹åŠŸèƒ½
1. **å¤šå±‚æµ‹è¯•æ¶æ„** - å•å…ƒã€é›†æˆã€E2Eä¸‰å±‚è¦†ç›–
2. **è‡ªåŠ¨åŒ–CI/CD** - GitHub Actionså®Œæ•´æµæ°´çº¿
3. **è¦†ç›–ç‡ç›‘æ§** - è‡ªåŠ¨é˜ˆå€¼æ£€æŸ¥å’ŒæŠ¥å‘Šç”Ÿæˆ
4. **è·¨å¹³å°æ”¯æŒ** - å¤šæ“ä½œç³»ç»Ÿå’Œæµè§ˆå™¨æµ‹è¯•
5. **å®æ—¶æµ‹è¯•** - WebSocketå’Œå®æ—¶åŠŸèƒ½æµ‹è¯•
6. **ç§»åŠ¨ç«¯æµ‹è¯•** - å“åº”å¼å’Œç§»åŠ¨è®¾å¤‡æµ‹è¯•

### ğŸ›¡ï¸ è´¨é‡ä¿è¯
- **ä»£ç è¦†ç›–ç‡**: é«˜è¦†ç›–ç‡è¦æ±‚ç¡®ä¿ä»£ç è´¨é‡
- **ç±»å‹å®‰å…¨**: TypeScriptä¸¥æ ¼æ¨¡å¼ç¡®ä¿ç±»å‹æ­£ç¡®æ€§
- **Lintæ£€æŸ¥**: ESLintç¡®ä¿ä»£ç é£æ ¼ä¸€è‡´æ€§
- **å®‰å…¨æ‰«æ**: ä¾èµ–å’Œä»£ç å®‰å…¨æ€§æ£€æŸ¥

### ğŸš€ å¼€å‘ä½“éªŒ
- **å¿«é€Ÿåé¦ˆ**: ç›‘è§†æ¨¡å¼æä¾›å³æ—¶æµ‹è¯•ç»“æœ
- **æ¸…æ™°æŠ¥å‘Š**: è¯¦ç»†çš„æµ‹è¯•å’Œè¦†ç›–ç‡æŠ¥å‘Š
- **æ¨¡å¼æŒ‡å—**: ä¸°å¯Œçš„æµ‹è¯•æ¨¡å¼å’Œæœ€ä½³å®è·µæ–‡æ¡£
- **è‡ªåŠ¨åŒ–**: å®Œå…¨è‡ªåŠ¨åŒ–çš„æµ‹è¯•æµç¨‹

## ğŸ“ˆ æµ‹è¯•ç­–ç•¥æˆæœ

é€šè¿‡å®æ–½è¿™å¥—å®Œæ•´çš„æµ‹è¯•ä½“ç³»ï¼Œé¡¹ç›®è·å¾—äº†ï¼š

1. **é«˜è´¨é‡ä¿è¯** - å¤šå±‚æµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£ç¡®æ€§
2. **å¿«é€Ÿè¿­ä»£** - è‡ªåŠ¨åŒ–æµ‹è¯•æ”¯æŒå¿«é€Ÿå¼€å‘
3. **è·¨å¹³å°ç¨³å®šæ€§** - å¤šç¯å¢ƒæµ‹è¯•ç¡®ä¿å…¼å®¹æ€§  
4. **å›¢é˜Ÿåä½œ** - ç»Ÿä¸€çš„æµ‹è¯•æ ‡å‡†å’Œæµç¨‹
5. **æŒç»­æ”¹è¿›** - è¦†ç›–ç‡ç›‘æ§æ¨åŠ¨ä»£ç è´¨é‡æå‡

è¿™å¥—æµ‹è¯•ç³»ç»Ÿä¸ºCloud Clipboardé¡¹ç›®æä¾›äº†åšå®çš„è´¨é‡åŸºç¡€ï¼Œæ”¯æŒé¡¹ç›®çš„æŒç»­å‘å±•å’Œç»´æŠ¤ã€‚